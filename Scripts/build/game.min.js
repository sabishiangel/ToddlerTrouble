var config,math,managers,objects,scenes,__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();!function(t){var e=function(){function t(){}return t.LEFT_ARROW=37,t.RIGHT_ARROW=39,t.UP_ARROW=38,t.DOWN_ARROW=40,t.W=87,t.A=65,t.S=83,t.D=68,t.SPACE=32,t}();t.Keys=e}(config||(config={})),function(t){var e;(e=t.Scene||(t.Scene={}))[e.START=0]="START",e[e.PLAY=1]="PLAY",e[e.OVER=2]="OVER"}(config||(config={})),function(t){var e=function(){function t(){}return t.HighScore=0,t}();t.Game=e}(managers||(managers={})),function(t){var e=function(t){function e(e,n,i,o,s,a,r){void 0===s&&(s=0),void 0===a&&(a=0),void 0===r&&(r=!1);var c=t.call(this,e,n+" "+i,o)||this;return r&&(c.regX=.5*c.getMeasuredWidth(),c.regY=.5*c.getMeasuredHeight()),c.x=s,c.y=a,c}return __extends(e,t),e}(createjs.Text);t.Label=e}(objects||(objects={})),function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.assetManager=managers.Game.assetManager,e}return __extends(e,t),e.prototype.Start=function(){},e.prototype.Update=function(){},e.prototype.Main=function(){},e}(createjs.Container);t.Scene=e}(objects||(objects={})),function(t){var e=function(t){function e(e,n){return void 0===e&&(e=0),void 0===n&&(n=0),t.call(this,e,n)||this}return __extends(e,t),e.Distance=function(t,e){return Math.floor(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)))},e}(createjs.Point);t.Vec2=e}(math||(math={})),function(t){var e=function(t){function e(e){var n=t.call(this,managers.Game.textureAtlas,e)||this;return n.name=e,n._initialize(),n}return __extends(e,t),e.prototype._initialize=function(){this.width=this.getBounds().width,this.height=this.getBounds().height,this.halfWidth=.5*this.width,this.halfHeight=.5*this.height,this.regX=this.halfWidth,this.regY=this.halfHeight,this.isColliding=!1},e.prototype.Start=function(){},e.prototype.Update=function(){},e.prototype.Reset=function(){},e.prototype.CheckBounds=function(){},e.prototype.Move=function(){},e}(createjs.Sprite);t.GameObject=e}(objects||(objects={})),function(t){var e=function(t){function e(e){var n=t.call(this,e)||this;return n.Start(),n}return __extends(e,t),e.prototype._animationEnded=function(){this.alpha=0,this.off("animationend",this._animationEnded.bind(this),!1),managers.Game.currentSceneObject.removeChild(this)},e.prototype.Start=function(){this.on("animationend",this._animationEnded.bind(this),!1)},e.prototype.Update=function(){},e}(t.GameObject);t.Explosion=e}(objects||(objects={})),function(t){var e=function(){function t(){this.enabled=!0,document.addEventListener("keydown",this.onKeyDown.bind(this),!1),document.addEventListener("keyup",this.onKeyUp.bind(this),!1)}return t.prototype.onKeyDown=function(t){switch(t.keyCode){case config.Keys.W:case config.Keys.UP_ARROW:this.moveForward=!0;break;case config.Keys.A:case config.Keys.LEFT_ARROW:this.moveLeft=!0;break;case config.Keys.S:case config.Keys.DOWN_ARROW:this.moveBackward=!0;break;case config.Keys.D:case config.Keys.RIGHT_ARROW:this.moveRight=!0;break;case config.Keys.SPACE:this.fire=!0}},t.prototype.onKeyUp=function(t){switch(t.keyCode){case config.Keys.W:case config.Keys.UP_ARROW:this.moveForward=!1;break;case config.Keys.A:case config.Keys.LEFT_ARROW:this.moveLeft=!1;break;case config.Keys.S:case config.Keys.DOWN_ARROW:this.moveBackward=!1;break;case config.Keys.D:case config.Keys.RIGHT_ARROW:this.moveRight=!1;break;case config.Keys.SPACE:this.fire=!1}},t}();t.Keyboard=e}(managers||(managers={})),function(t){var e=function(){function t(){this._initialize()}return Object.defineProperty(t.prototype,"Lives",{get:function(){return this._lives},set:function(t){this._lives=t,this.LivesLabel.text="Lives: "+this._lives},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Score",{get:function(){return this._score},set:function(t){this._score=t,this.ScoreLabel.text="Score: "+this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"HighScore",{get:function(){return this._highScore},set:function(t){this._highScore=t,this.HighScoreLabel.text="High Score: "+this._highScore},enumerable:!0,configurable:!0}),t.prototype._initialize=function(){this.LivesLabel=new objects.Label("Lives: 0","20px","Dock51","#FFFF00",10,10,!1),this.ScoreLabel=new objects.Label("Score: 99999","20px","Dock51","#FFFF00",500,10,!1),this.HighScoreLabel=new objects.Label("High Score: 99999","40px","Dock51","#FFFF00",320,240,!0),this.Lives=5,this.Score=0,this.HighScore=0},t}();t.ScoreBoard=e}(managers||(managers={})),function(t){var e=function(){function t(){this.Start()}return t.prototype._buildBulletPool=function(){for(var t=0;t<this._bulletCount;t++)this.Bullets[t]=new objects.Bullet},t.prototype.Start=function(){this._bulletCount=50,this.Bullets=new Array,this._buildBulletPool(),this.CurrentBullet=0},t.prototype.Update=function(){this.Bullets.forEach(function(t){t.Update()})},t}();t.Bullet=e}(managers||(managers={})),function(t){var e=function(){function e(){}return e.Check=function(e,n){var i=new math.Vec2(e.x,e.y),o=new math.Vec2(n.x,n.y);if(math.Vec2.Distance(i,o)<e.halfHeight+n.halfHeight){if(!n.isColliding)switch(n.isColliding=!0,n.name){case"coin":0!=n.alpha&&0!=e.alpha&&(createjs.Sound.play("coin"),t.Game.scoreBoard.Score+=100,n.alpha=0,t.Game.scoreBoard.Score%1e3==0&&(t.Game.scoreBoard.Lives+=1,createjs.Sound.play("life")),t.Game.HighScore<=t.Game.scoreBoard.Score&&(t.Game.scoreBoard.HighScore=t.Game.scoreBoard.Score,t.Game.HighScore=t.Game.scoreBoard.HighScore));break;case"cloud":if(0!=e.alpha)createjs.Sound.play("explosion"),t.Game.scoreBoard.Lives-=1,(s=new objects.Explosion("explosion")).x=e.x,s.y=e.y,t.Game.currentSceneObject.addChild(s),e.alpha=0,t.Game.plane.planeFlash.alpha=1,t.Game.plane.planeFlash.gotoAndPlay("planeflash");break;case"enemy":var s;if(0!=n.alpha)createjs.Sound.play("explosion"),(s=new objects.Explosion("explosion")).x=n.x,s.y=n.y,t.Game.currentSceneObject.addChild(s),t.Game.scoreBoard.Score+=200,n.Reset()}}else n.isColliding=!1},e}();t.Collision=e}(managers||(managers={})),function(t){var e=function(t){function e(e,n,i){void 0===n&&(n=0),void 0===i&&(i=0);var o=t.call(this,e)||this;return o.x=n,o.y=i,o.on("mouseover",o._mouseOver),o.on("mouseout",o._mouseOut),o}return __extends(e,t),e.prototype._mouseOver=function(){this.alpha=.7},e.prototype._mouseOut=function(){this.alpha=1},e}(t.GameObject);t.Button=e}(objects||(objects={})),function(t){var e=function(t){function e(){var e=t.call(this,"enemy")||this;return e.Start(),e}return __extends(e,t),e.prototype.Start=function(){this._dy=10,this.Reset()},e.prototype.Update=function(){this.Move(),this.CheckBounds()},e.prototype.Reset=function(){this.x=Math.floor(Math.random()*(640-this.width)+this.halfWidth),this.y=-480,this.alpha=0},e.prototype.Move=function(){this.y+=this._dy},e.prototype.CheckBounds=function(){this.y>=0&&0==this.alpha&&(this.alpha=1),this.y>=480+this.height&&this.Reset()},e}(t.GameObject);t.Enemy=e}(objects||(objects={})),function(t){var e=function(t){function e(){var e=t.call(this,"bullet")||this;return e.Start(),e}return __extends(e,t),e.prototype.Start=function(){this._dx=0,this._dy=-10,this.Reset()},e.prototype.Update=function(){this.Move(),this.CheckBounds()},e.prototype.Reset=function(){this.x=-5e3,this.y=-5e3},e.prototype.CheckBounds=function(){this.y<=-this.height&&this.Reset()},e.prototype.Move=function(){this.y+=this._dy},e}(t.GameObject);t.Bullet=e}(objects||(objects={})),function(t){var e=function(t){function e(){var e=t.call(this,managers.Game.assetManager.getResult("ocean"))||this;return e.Start(),e}return __extends(e,t),e.prototype._reset=function(){this.y=-960},e.prototype._move=function(){this.y+=this._dy},e.prototype._checkBounds=function(){this.y>=0&&this._reset()},e.prototype.Start=function(){this._dy=5,this._reset()},e.prototype.Update=function(){this._move(),this._checkBounds()},e}(createjs.Bitmap);t.Ocean=e}(objects||(objects={})),function(t){var e=function(e){function n(){var t=e.call(this,"plane")||this;return t.Start(),t}return __extends(n,e),n.prototype._animationEnded=function(){0==this.alpha&&(this.alpha=1,this.planeFlash.alpha=0)},n.prototype.Start=function(){this.planeFlash=new t.PlaneFlash,this.planeFlash.alpha=1,this.planeFlash.on("animationend",this._animationEnded.bind(this),!1),this.x=320,this.y=430,this._bulletSpawn=new math.Vec2},n.prototype.Update=function(){this.Move(),this.CheckBounds(),this.BulletFire()},n.prototype.Reset=function(){},n.prototype.Move=function(){managers.Game.keyboardManager.moveLeft&&(this.x-=5),managers.Game.keyboardManager.moveRight&&(this.x+=5),this.planeFlash.x=this.x,this.planeFlash.y=this.y},n.prototype.CheckBounds=function(){this.x>=640-this.halfWidth&&(this.x=640-this.halfWidth),this.x<=this.halfWidth&&(this.x=this.halfWidth)},n.prototype.BulletFire=function(){if(this.alpha=1){var t=createjs.Ticker.getTicks();if(managers.Game.keyboardManager.fire&&t%10==0){this._bulletSpawn=new math.Vec2(this.x,this.y-this.halfHeight);var e=managers.Game.bulletManger.CurrentBullet,n=managers.Game.bulletManger.Bullets[e];n.x=this._bulletSpawn.x,n.y=this._bulletSpawn.y,managers.Game.bulletManger.CurrentBullet++,managers.Game.bulletManger.CurrentBullet>49&&(managers.Game.bulletManger.CurrentBullet=0),createjs.Sound.play("bulletSound")}}},n}(t.GameObject);t.Plane=e}(objects||(objects={})),function(t){var e=function(t){function e(){return t.call(this,"planeflash")||this}return __extends(e,t),e.prototype.Start=function(){},e.prototype.Update=function(){},e}(t.GameObject);t.PlaneFlash=e}(objects||(objects={})),function(t){var e=function(t){function e(){var e=t.call(this,"coin")||this;return e.Start(),e}return __extends(e,t),e.prototype.Start=function(){},e.prototype.Update=function(){this.CheckBounds()},e.prototype.CheckBounds=function(){this.y>480+this.height&&(this.alpha=1)},e}(t.GameObject);t.Coin=e}(objects||(objects={})),function(t){var e=function(t){function e(){var e=t.call(this,"island")||this;return e.Start(),e}return __extends(e,t),e.prototype.Start=function(){this._dy=5,this.Reset()},e.prototype.Update=function(){this.Move(),this.CheckBounds()},e.prototype.Reset=function(){this.x=Math.floor(Math.random()*(640-this.width)+this.halfWidth),this.y=-this.height},e.prototype.Move=function(){this.y+=this._dy},e.prototype.CheckBounds=function(){this.y>=480+this.height&&this.Reset()},e}(t.GameObject);t.Island=e}(objects||(objects={})),function(t){var e=function(t){function e(){var e=t.call(this,"cloud")||this;return e.Start(),e}return __extends(e,t),e.prototype.Start=function(){this.Reset()},e.prototype.Update=function(){this.Move(),this.CheckBounds()},e.prototype.Reset=function(){this.x=Math.floor(Math.random()*(640-this.width)+this.halfWidth),this.y=-this.height,this._dx=Math.floor(4*Math.random()-2),this._dy=Math.floor(5*Math.random()+5)},e.prototype.Move=function(){this.y+=this._dy,this.x+=this._dx},e.prototype.CheckBounds=function(){this.y>=480+this.height&&this.Reset()},e}(t.GameObject);t.Cloud=e}(objects||(objects={})),function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.Start(),e}return __extends(e,t),e.prototype._restartButtonClick=function(){managers.Game.currentScene=config.Scene.PLAY},e.prototype.Start=function(){this._ocean=new objects.Ocean,this._overLabel=new objects.Label("Game Over","60px","Dock51","#FFFF00",320,140,!0),this._restartButton=new objects.Button("restartButton",320,340),this._scoreboard=new managers.ScoreBoard,this.Main()},e.prototype.Update=function(){this._ocean.Update()},e.prototype.Main=function(){this.addChild(this._ocean),this.addChild(this._overLabel),this.addChild(this._restartButton),this.addChild(this._scoreboard.HighScoreLabel),this._scoreboard.HighScore=managers.Game.HighScore,this._restartButton.on("click",this._restartButtonClick)},e}(objects.Scene);t.OverScene=e}(scenes||(scenes={})),function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.Start(),e}return __extends(e,t),e.prototype.Start=function(){this._ocean=new objects.Ocean,this._plane=new objects.Plane,managers.Game.plane=this._plane,this._bulletManager=new managers.Bullet,managers.Game.bulletManger=this._bulletManager,this._enemy=new objects.Enemy,this._coin=new objects.Coin,this._island=new objects.Island,this._clouds=new Array,this._cloudNum=2;for(var t=0;t<this._cloudNum;t++)this._clouds[t]=new objects.Cloud;this._engineSound=createjs.Sound.play("engine"),this._engineSound.loop=-1,this._engineSound.volume=.3,this._scoreBoard=new managers.ScoreBoard,managers.Game.scoreBoard=this._scoreBoard,this.Main()},e.prototype.Update=function(){var t=this;this._ocean.Update(),this._plane.Update(),this._enemy.Update(),this._bulletManager.Update(),this._coin.x=this._island.x,this._coin.y=this._island.y,this._coin.Update(),this._island.Update(),managers.Collision.Check(this._plane,this._coin),this._clouds.forEach(function(e){e.Update(),managers.Collision.Check(t._plane,e)}),this._bulletManager.Bullets.forEach(function(e){managers.Collision.Check(e,t._enemy)}),this._scoreBoard.Lives<=0&&(this._engineSound.stop(),managers.Game.currentScene=config.Scene.OVER)},e.prototype.Main=function(){var t=this;this.addChild(this._ocean),this.addChild(this._island),this.addChild(this._coin),this.addChild(this._plane),this.addChild(this._plane.planeFlash),this.addChild(this._enemy),this._bulletManager.Bullets.forEach(function(e){t.addChild(e)}),this._clouds.forEach(function(e){t.addChild(e)}),this.addChild(this._scoreBoard.LivesLabel),this.addChild(this._scoreBoard.ScoreLabel)},e}(objects.Scene);t.PlayScene=e}(scenes||(scenes={})),function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.Start(),e}return __extends(e,t),e.prototype._startButtonClick=function(){managers.Game.currentScene=config.Scene.PLAY},e.prototype.Start=function(){this._ocean=new objects.Ocean,this._welcomeLabel=new objects.Label("Mail Pilot","60px","Dock51","#FFFF00",320,240,!0),this._startButton=new objects.Button("startButton",320,340),this.Main()},e.prototype.Update=function(){this._ocean.Update()},e.prototype.Main=function(){this.addChild(this._ocean),this.addChild(this._welcomeLabel),this.addChild(this._startButton),this._startButton.on("click",this._startButtonClick)},e}(objects.Scene);t.StartScene=e}(scenes||(scenes={})),function(){var t,e,n,i,o,s,a,r,c,h=document.getElementById("canvas");function u(){console.log("Starting Application..."),(c=new Stats).showPanel(0),document.body.appendChild(c.dom),a.images=[e.getResult("textureAtlas")],r=new createjs.SpriteSheet(a),(t=new createjs.Stage(h)).enableMouseOver(20),createjs.Ticker.framerate=60,createjs.Ticker.on("tick",l),managers.Game.stage=t,managers.Game.currentScene=config.Scene.START,o=config.Scene.START,s=new managers.Keyboard,managers.Game.keyboardManager=s,managers.Game.assetManager=e,managers.Game.textureAtlas=r,d()}function l(){c.begin(),o!=managers.Game.currentScene&&d(),i.Update(),t.update(),c.end()}function d(){switch(t.removeAllChildren(),managers.Game.currentScene){case config.Scene.START:i=new scenes.StartScene;break;case config.Scene.PLAY:i=new scenes.PlayScene;break;case config.Scene.OVER:i=new scenes.OverScene}o=managers.Game.currentScene,managers.Game.currentSceneObject=i,t.addChild(i)}a={images:[""],frames:[[2,2,16,16,0,0,0],[20,2,226,178,0,0,0],[2,182,44,40,0,0,0],[48,182,44,40,0,0,0],[94,182,44,40,0,0,0],[140,182,44,40,0,0,0],[186,182,44,40,0,0,0],[2,224,44,40,0,0,0],[48,224,44,40,0,0,0],[94,224,44,40,0,0,0],[140,224,44,40,0,0,0],[186,224,44,40,0,0,0],[2,266,93,74,0,0,0],[97,266,93,74,0,0,0],[2,342,93,74,0,0,0],[97,342,65,65,0,0,0],[164,342,65,65,0,0,0],[2,418,65,65,0,0,0],[69,418,65,65,0,0,0],[136,418,65,65,0,0,0],[2,485,65,65,0,0,0],[69,485,65,65,0,0,0],[136,485,62,63,0,0,0],[2,552,65,65,0,0,0],[69,552,65,65,0,0,0],[136,552,65,65,0,0,0],[2,619,65,65,0,0,0],[69,619,65,65,0,0,0],[2,686,200,60,0,0,0],[204,686,32,32,0,0,0],[2,748,32,32,0,0,0],[36,748,32,32,0,0,0],[70,748,32,32,0,0,0],[104,748,32,32,0,0,0],[138,748,32,32,0,0,0],[2,782,200,60,0,0,0]],animations:{bullet:{frames:[0]},cloud:{frames:[1]},coin:{frames:[2,3,4,5,6,7,8,9,10,11],speed:.33},enemy:{frames:[12,13,14],speed:.25},explosion:{frames:[15,16,17,18,19,20,21],speed:.16},island:{frames:[22]},plane:{frames:[23,24,25]},planeflash:{frames:[26,27,26,27,26,27],speed:.08},restartButton:{frames:[28]},smallexplosion:{frames:[29,30,31,32,33,34],speed:.16},startButton:{frames:[35]}}},n=[{id:"textureAtlas",src:"./Assets/sprites/textureAtlas.png"},{id:"ocean",src:"./Assets/images/ocean.gif"},{id:"engine",src:"./Assets/audio/engine.ogg"},{id:"coin",src:"./Assets/audio/coin.wav"},{id:"life",src:"./Assets/audio/life.wav"},{id:"explosion",src:"./Assets/audio/explosion.mp3"},{id:"bulletSound",src:"./Assets/audio/bullet.mp3"}],window.onload=function(){console.log("Initialization Started..."),(e=new createjs.LoadQueue).installPlugin(createjs.Sound),e.loadManifest(n),e.on("complete",u,this)}}();
